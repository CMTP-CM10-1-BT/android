From e6605df087a1c35e9a05b38f525751890dd7afd4 Mon Sep 17 00:00:00 2001
From: milaq <micha.laqua@gmail.com>
Date: Tue, 12 Feb 2013 15:48:33 +0100
Subject: [PATCH 1/1] button-backlight: remove inactivity timeout rebased:
 included keyboard backlight

---
 .../android/server/power/PowerManagerService.java  |   18 +++++-------------
 1 files changed, 5 insertions(+), 13 deletions(-)

diff --git a/services/java/com/android/server/power/PowerManagerService.java b/services/java/com/android/server/power/PowerManagerService.java
index d4fa948..d090826 100644
--- a/services/java/com/android/server/power/PowerManagerService.java
+++ b/services/java/com/android/server/power/PowerManagerService.java
@@ -1317,19 +1317,11 @@ public final class PowerManagerService extends IPowerManager.Stub
                     nextTimeout = mLastUserActivityTime
                             + screenOffTimeout - screenDimDuration;
                     if (now < nextTimeout) {
-                        if (now > mLastUserActivityTime + BUTTON_ON_DURATION) {
-                            mButtonsLight.setBrightness(0);
-                            mKeyboardLight.setBrightness(0);
-                        } else {
-                            int brightness = mButtonBrightnessOverrideFromWindowManager >= 0
-                                    ? mButtonBrightnessOverrideFromWindowManager
-                                    : mDisplayPowerRequest.screenBrightness;
-                            mButtonsLight.setBrightness(brightness);
-                            mKeyboardLight.setBrightness(mKeyboardVisible ? brightness : 0);
-                            if (brightness != 0) {
-                                nextTimeout = now + BUTTON_ON_DURATION;
-                            }
-                        }
+                        int brightness = mButtonBrightnessOverrideFromWindowManager >= 0
+                                ? mButtonBrightnessOverrideFromWindowManager
+                                : mDisplayPowerRequest.screenBrightness;
+                        mButtonsLight.setBrightness(brightness);
+                        mKeyboardLight.setBrightness(mKeyboardVisible ? brightness : 0);
                         mUserActivitySummary |= USER_ACTIVITY_SCREEN_BRIGHT;
                     } else {
                         nextTimeout = mLastUserActivityTime + screenOffTimeout;
-- 
1.7.9

